[gd_scene format=4 uid="uid://ckdq3xhi07i1g"]

[ext_resource type="TileSet" uid="uid://eynb8l6cn813" path="res://TileSet/lab.tres" id="2_0ji40"]
[ext_resource type="PackedScene" uid="uid://kty6sii5hhfk" path="res://Nodes/Prefabs/Warps/warp_up.tscn" id="3_52n5y"]
[ext_resource type="PackedScene" uid="uid://bq6ms1y0228x8" path="res://Nodes/Prefabs/props_prefab.tscn" id="5_8dt50"]
[ext_resource type="PackedScene" uid="uid://cgtnu7kmoncu6" path="res://Nodes/Prefabs/item_prefab.tscn" id="6_7i8dt"]
[ext_resource type="PackedScene" uid="uid://c3gpm8500ebkp" path="res://Nodes/Prefabs/Enemies/enemy_1.tscn" id="6_jyvag"]
[ext_resource type="Resource" uid="uid://c03am3sxypfu3" path="res://Resources/Consumable_Items/potion_10tp.tres" id="8_52n5y"]
[ext_resource type="Script" uid="uid://d2t4gp3nheyip" path="res://Scripts/Resources/equip_serializable.gd" id="8_ygji3"]
[ext_resource type="PackedScene" uid="uid://c8fmwkm58xib0" path="res://Nodes/Prefabs/savespot_prefab.tscn" id="9_4u8d0"]
[ext_resource type="Resource" uid="uid://cmtocen6a17v3" path="res://Resources/Equip/coil_sword.tres" id="9_mxnnk"]
[ext_resource type="Script" uid="uid://dcdqq2gseak8d" path="res://Scripts/Resources/keyitem_serializable.gd" id="10_xdoc7"]
[ext_resource type="Resource" uid="uid://dn7qw2txq8q8w" path="res://Resources/Key_Items/money.tres" id="11_5drey"]
[ext_resource type="Resource" uid="uid://b36k10uy3fikw" path="res://Resources/Consumable_Items/potion.tres" id="12_ygji3"]
[ext_resource type="Script" uid="uid://beengnff5twcx" path="res://Scripts/Resources/item_serializable.gd" id="13_mxnnk"]
[ext_resource type="Resource" uid="uid://ctfpc74ha1avq" path="res://Resources/Consumable_Items/revive_mint.tres" id="14_xdoc7"]
[ext_resource type="Resource" uid="uid://bxfthrihw0pwr" path="res://Resources/Key_Items/mystery_key.tres" id="15_5drey"]

[sub_resource type="GDScript" id="GDScript_52n5y"]
script/source = "extends Room_Script
#-------------------------------------------------------------------------------
func Set_Room(_world_2d: World_2D):
	super.Set_Room(_world_2d)
	var _index: int = _world_2d.key_dictionary.get(room_id, 0)
	print(room_id+\"_event_\"+str(_index))
	#-------------------------------------------------------------------------------
	match(_index):
		0:
			await CutScene_00(_world_2d)
		#-------------------------------------------------------------------------------
	#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
func CutScene_00(_world_2d: World_2D):
	_world_2d.camera.position = _world_2d.Camera_Set_Target_Position()
	_world_2d.is_in_dialogue = true
	_world_2d.black_panel.self_modulate = Color.BLACK
	print(\"Cutscene Start\")
	singleton.bgmPlayer.stop()
	#-------------------------------------------------------------------------------
	await _world_2d.Seconds(1.5)
	#-------------------------------------------------------------------------------
	_world_2d.Dialogue_Open()
	singleton.Common_Submited()
	await _world_2d.Dialogue(false, \"Long Ago. In a Cyberpunck city...\")
	singleton.Common_Selected()
	await _world_2d.Dialogue(false, \"Bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla.\")
	_world_2d.Dialogue_Close()
	singleton.Common_Canceled()
	#-------------------------------------------------------------------------------
	var _tween: Tween = create_tween()
	_tween.tween_property(_world_2d.black_panel, \"self_modulate\", Color.TRANSPARENT, 0.3)
	await _tween.finished
	#-------------------------------------------------------------------------------
	_world_2d.is_in_dialogue = false
	print(\"Cutscene End\")
	_world_2d.key_dictionary.set(room_id, 1)
	singleton.Play_BGM(singleton.stage1)
#-------------------------------------------------------------------------------
"

[sub_resource type="Resource" id="Resource_4u8d0"]
script = ExtResource("13_mxnnk")
item_resource = ExtResource("8_52n5y")
hold = 4
metadata/_custom_type_script = "uid://beengnff5twcx"

[sub_resource type="Resource" id="Resource_w87vk"]
script = ExtResource("13_mxnnk")
item_resource = ExtResource("12_ygji3")
hold = 2
metadata/_custom_type_script = "uid://beengnff5twcx"

[sub_resource type="Resource" id="Resource_8ss50"]
script = ExtResource("8_ygji3")
equip_resource = ExtResource("9_mxnnk")
metadata/_custom_type_script = "uid://d2t4gp3nheyip"

[sub_resource type="Resource" id="Resource_srwso"]
script = ExtResource("10_xdoc7")
key_item_resource = ExtResource("11_5drey")
metadata/_custom_type_script = "uid://dcdqq2gseak8d"

[sub_resource type="Resource" id="Resource_xdoc7"]
script = ExtResource("10_xdoc7")
key_item_resource = ExtResource("15_5drey")
metadata/_custom_type_script = "uid://dcdqq2gseak8d"

[sub_resource type="GDScript" id="GDScript_xdoc7"]
script/source = "extends CharacterBody2D
#-------------------------------------------------------------------------------
enum ENEMY_STATE{PATROLLING, CHASING, FIGHTING}
#-------------------------------------------------------------------------------
var _myENEMY_STATE: ENEMY_STATE = ENEMY_STATE.PATROLLING
@export var enemy_collider: CollisionShape2D
#-------------------------------------------------------------------------------
@export var area2d_Interactable: Interactable_Script
@export var area2d_collider: CollisionShape2D
#-------------------------------------------------------------------------------
@export var enemy: Array[Party_Member]
@export var label: Label
#-------------------------------------------------------------------------------
var original_position: Vector2
var counter: int
#-------------------------------------------------------------------------------
func _ready() -> void:
	original_position = global_position
	#-------------------------------------------------------------------------------
	if(singleton.world_2d.key_dictionary.get(singleton.world_2d.Get_Item_Script_ID(self), 0) == 1):
		queue_free()
	#-------------------------------------------------------------------------------
	else:
		label.text = \"\"
		#-------------------------------------------------------------------------------
		for _i in enemy.size():
			enemy[_i].playback = enemy[_i].animation_tree.get(\"parameters/playback\")
			singleton.world_2d.PlayAnimation(enemy[_i].playback, \"Idle\")
		#-------------------------------------------------------------------------------
	#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
func _physics_process(_delta: float) -> void:
	if(singleton.world_2d.is_in_dialogue):
		return
	#-------------------------------------------------------------------------------
	match(_myENEMY_STATE):
		ENEMY_STATE.PATROLLING:
			pass
		#-------------------------------------------------------------------------------
		ENEMY_STATE.CHASING:
			#-------------------------------------------------------------------------------
			if(singleton.world_2d.player_characterbody2d.global_position.distance_to(original_position) < 500):
				#-------------------------------------------------------------------------------
				if(singleton.world_2d.player_characterbody2d.global_position.distance_to(global_position) > 15):
					var _v2: Vector2 = singleton.world_2d.player_characterbody2d.global_position - global_position
					#-------------------------------------------------------------------------------
					if(enemy[0].is_Facing_Left):
						#-------------------------------------------------------------------------------
						if(_v2.x > 0):
							singleton.world_2d.Face_Left(enemy[0], false)
						#-------------------------------------------------------------------------------
					#-------------------------------------------------------------------------------
					else:
						#-------------------------------------------------------------------------------
						if(_v2.x < 0):
							singleton.world_2d.Face_Left(enemy[0], true)
						#-------------------------------------------------------------------------------
					#-------------------------------------------------------------------------------
					if(counter > 30):
						var _dir = atan2(_v2.y, _v2.x)
						var _vel = Vector2(cos(_dir), sin(_dir)) * 120.0 * singleton.world_2d.deltaTimeScale
						velocity = _vel
						move_and_slide()
						return
					else:
						counter += 1
						#-------------------------------------------------------------------------------
						if(counter == 30):
							label.text = \"\"
							singleton.world_2d.PlayAnimation(enemy[0].playback, \"Walk\")
						#-------------------------------------------------------------------------------
				#-------------------------------------------------------------------------------
				else:
					Enter_Battle()
					return
				#-------------------------------------------------------------------------------
			#-------------------------------------------------------------------------------
			else:
				_myENEMY_STATE = ENEMY_STATE.PATROLLING
				global_position = original_position
				area2d_collider.set_deferred(\"disabled\", false)
				singleton.world_2d.PlayAnimation(enemy[0].playback, \"Idle\")
				singleton.world_2d.Face_Left(enemy[0], false)
				return
			#-------------------------------------------------------------------------------
		#-------------------------------------------------------------------------------
		ENEMY_STATE.FIGHTING:
			pass
		#-------------------------------------------------------------------------------
	#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
func Enter_Chase():
	#-------------------------------------------------------------------------------
	if(_myENEMY_STATE == ENEMY_STATE.PATROLLING):
		_myENEMY_STATE = ENEMY_STATE.CHASING
		label.text = \"!\"
		counter = 0
		area2d_collider.set_deferred(\"disabled\", true)
	#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
func Enter_Battle():
	_myENEMY_STATE = ENEMY_STATE.FIGHTING
	label.text = \"\"
	singleton.world_2d.can_enter_fight = false
	#-------------------------------------------------------------------------------
	#await Dialogue_Before_Battle()
	#-------------------------------------------------------------------------------
	await singleton.world_2d.EnterBattle(enemy)
	await Battle()
#-------------------------------------------------------------------------------
func Battle():
	#-------------------------------------------------------------------------------
	while(singleton.world_2d.myBATTLE_STATE == singleton.world_2d.BATTLE_STATE.STILL_FIGHTING):
		await singleton.world_2d.Wait_for_Player()
		await singleton.world_2d.Start_BulletHell(func():singleton.world_2d.Stage1_Fire1(), 6)
		await singleton.world_2d.Wait_for_Player()
		await singleton.world_2d.Start_BulletHell(func():singleton.world_2d.Stage1_Fire2(), 6)
		#await singleton.world_2d.Wait_for_Player()
		#await singleton.world_2d.Start_BulletHell(func():print(\"C Actio\"), 2)
	#-------------------------------------------------------------------------------
	singleton.world_2d.ExitBatle(func():Battle(), func():Win_Battle(), func():Escape_Battle())
	#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
func Dialogue_Before_Battle():
	singleton.world_2d.Dialogue_Open()
	await singleton.world_2d.Dialogue(true, \"* Prepeare yourself for a beaten.\")
	await singleton.world_2d.Dialogue(true, \"* Because I am gonna beat you.\")
	singleton.world_2d.Dialogue_Close()
#-------------------------------------------------------------------------------
func Win_Battle():
	singleton.world_2d.key_dictionary.set(singleton.world_2d.room_test.Get_Item_Script_ID(self), 1)
	#-------------------------------------------------------------------------------
	enemy_collider.set_deferred(\"disabled\", true)
	area2d_collider.set_deferred(\"disabled\", true)
	#-------------------------------------------------------------------------------
	singleton.world_2d.can_enter_fight = true
#-------------------------------------------------------------------------------
func Escape_Battle():
	_myENEMY_STATE = ENEMY_STATE.PATROLLING
	global_position = original_position
	area2d_collider.set_deferred(\"disabled\", false)
	singleton.world_2d.PlayAnimation(enemy[0].playback, \"Idle\")
	singleton.world_2d.Face_Left(enemy[0], false)
	#-------------------------------------------------------------------------------
	for _i in range(1, enemy.size()):
		enemy[_i].hide()
	#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wkx03"]
size = Vector2(16, 8)

[sub_resource type="GDScript" id="GDScript_ygji3"]
script/source = "extends Interactable_Script
#-------------------------------------------------------------------------------
@export var _enemy_root: CharacterBody2D
#-------------------------------------------------------------------------------
func Interactable_Action():
	_enemy_root.Enter_Chase()
#-------------------------------------------------------------------------------
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xdoc7"]
size = Vector2(224, 192)

[sub_resource type="GDScript" id="GDScript_rqg47"]
script/source = "extends Interactable_Script
#-------------------------------------------------------------------------------
@export var user: Party_Member
#-------------------------------------------------------------------------------
@export var _consumableitem_array: Array[Item_Serializable]
@export var _equipitem_array: Array[Equip_Serializable]
@export var _keyitem_array: Array[Key_Item_Serializable]
#-------------------------------------------------------------------------------
func _ready() -> void:
	user.playback = user.animation_tree.get(\"parameters/playback\")
	singleton.world_2d.PlayAnimation(user.playback, \"Idle\")
	#-------------------------------------------------------------------------------
	for _i in _equipitem_array.size():
		var _id: String = singleton.world_2d.Get_MerchantId_and_ItemId_and_Hold(name, _equipitem_array[_i].equip_resource)
		_equipitem_array[_i].stored = singleton.world_2d.key_dictionary.get(_id, _equipitem_array[_i].stored)
	#-------------------------------------------------------------------------------
	for _i in _keyitem_array.size():
		var _id: String = singleton.world_2d.Get_MerchantId_and_ItemId_and_Hold(name, _keyitem_array[_i].key_item_resource)
		_keyitem_array[_i].stored = singleton.world_2d.key_dictionary.get(_id, _keyitem_array[_i].stored)
	#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
func Interactable_Action():
	singleton.world_2d.PlayAnimation(user.playback, \"Walk\")
	#-------------------------------------------------------------------------------
	singleton.world_2d.Dialogue_Open()
	singleton.Common_Submited()
	#-------------------------------------------------------------------------------
	var _s: String = \"Bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla \"
	_s += \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla \"
	_s += \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla \"
	_s += \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla \"
	_s += \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla \"
	_s += \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla \"
	_s += \"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla.\"
	#-------------------------------------------------------------------------------
	await singleton.world_2d.Dialogue(true, \"* I am not an enemy, but a merchant. \"+_s)
	singleton.Common_Selected()
	await singleton.world_2d.Dialogue(true, \"* Do you want to buy something? \"+_s)
	singleton.world_2d.Dialogue_Close()
	#-------------------------------------------------------------------------------
	await singleton.world_2d.Open_Market(name, _consumableitem_array, _equipitem_array, _keyitem_array)
	#-------------------------------------------------------------------------------
	singleton.world_2d.Dialogue_Open()
	await singleton.world_2d.Dialogue(true, \"* Thank you. \"+_s)
	singleton.world_2d.Dialogue_Close()
	singleton.Common_Canceled()
	#-------------------------------------------------------------------------------
	singleton.world_2d.PlayAnimation(user.playback, \"Idle\")
#-------------------------------------------------------------------------------
"

[sub_resource type="Resource" id="Resource_kcmek"]
resource_local_to_scene = true
script = ExtResource("13_mxnnk")
item_resource = ExtResource("12_ygji3")
hold = 3
metadata/_custom_type_script = "uid://beengnff5twcx"

[sub_resource type="Resource" id="Resource_ptuk6"]
resource_local_to_scene = true
script = ExtResource("13_mxnnk")
item_resource = ExtResource("14_xdoc7")
hold = 2
price = 45
metadata/_custom_type_script = "uid://beengnff5twcx"

[sub_resource type="Resource" id="Resource_8opot"]
resource_local_to_scene = true
script = ExtResource("8_ygji3")
equip_resource = ExtResource("9_mxnnk")
stored = 16
price = 20
metadata/_custom_type_script = "uid://d2t4gp3nheyip"

[sub_resource type="Resource" id="Resource_wrvon"]
resource_local_to_scene = true
script = ExtResource("10_xdoc7")
key_item_resource = ExtResource("15_5drey")
stored = 33
price = 14
metadata/_custom_type_script = "uid://dcdqq2gseak8d"

[sub_resource type="CircleShape2D" id="CircleShape2D_rqg47"]
radius = 16.0

[node name="room_test_01" type="Node2D" unique_id=1720227224 node_paths=PackedStringArray("room_limits")]
y_sort_enabled = true
script = SubResource("GDScript_52n5y")
room_limits = NodePath("room_limits")

[node name="room_limits" type="Control" parent="." unique_id=607768976]
layout_mode = 3
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -104.0
offset_top = -176.0
offset_right = 536.0
offset_bottom = 168.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="TileMapLayer1" type="TileMapLayer" parent="." unique_id=401863219]
z_index = -1
tile_map_data = PackedByteArray("AAD//wEAAAAHAAcAAAAAAAEAAAAHAAcAAAABAAEAAAAHAAcAAAACAAEAAAAHAAcAAAADAAEAAAAHAAcAAAAEAAEAAAAHAAcAAAAFAAEAAAAHAAcAAAAGAAEAAAAHAAcAAAAHAAEAAAAHAAcAAAAIAAEAAAAHAAcAAAAIAAIAAAAHAAcAAAAIAAMAAAAHAAcAAAAJAAMAAAAHAAcAAAAKAAMAAAAHAAcAAAALAAMAAAAHAAcAAAD//wIAAAAHAAcAAAAAAAIAAAAHAAcAAAABAAIAAAAHAAcAAAACAAIAAAAHAAcAAAADAAIAAAAHAAcAAAAEAAIAAAAHAAcAAAAFAAIAAAAHAAcAAAAGAAIAAAAHAAcAAAD//wMAAAAHAAcAAAAAAAMAAAAHAAcAAAABAAMAAAAHAAcAAAACAAMAAAAHAAcAAAADAAMAAAAHAAcAAAAEAAMAAAAHAAcAAAAFAAMAAAAHAAcAAAAGAAMAAAAHAAcAAAAHAAIAAAAHAAcAAAAHAAMAAAAHAAcAAAAJAAEAAAAHAAcAAAAJAAIAAAAHAAcAAAAKAAEAAAAHAAcAAAAKAAIAAAAHAAcAAAALAAEAAAAHAAcAAAALAAIAAAAHAAcAAAAMAAEAAAAHAAcAAAAMAAIAAAAHAAcAAAAMAAMAAAAHAAcAAAANAAEAAAALAAcAAAANAAIAAAALAAgAAAANAAMAAAALAAkAAAAOAAEAAAAMAAcAAAAOAAIAAAAMAAgAAAAOAAMAAAAMAAkAAAAPAAEAAAANAAcAAAAPAAIAAAANAAgAAAAPAAMAAAANAAkAAAAQAAEAAAAHAAcAAAAQAAIAAAAHAAcAAAAQAAMAAAAHAAcAAAARAAEAAAAHAAcAAAARAAIAAAAHAAcAAAARAAMAAAAHAAcAAAASAAEAAAAHAAcAAAASAAIAAAAHAAcAAAASAAMAAAAHAAcAAAATAAEAAAAHAAcAAAATAAIAAAAHAAcAAAATAAMAAAAHAAcAAAAUAAEAAAAHAAcAAAAUAAIAAAAHAAcAAAAUAAMAAAAHAAcAAAASAAQAAAAHAAcAAAASAAUAAAAHAAcAAAASAAYAAAALAAcAAAASAAcAAAALAAgAAAASAAgAAAALAAkAAAATAAQAAAAHAAcAAAATAAUAAAAHAAcAAAATAAYAAAAMAAcAAAATAAcAAAAMAAgAAAATAAgAAAAMAAkAAAAUAAQAAAAHAAcAAAAUAAUAAAAHAAcAAAAUAAYAAAANAAcAAAAUAAcAAAANAAgAAAAUAAgAAAANAAkAAAASAPz/AQAEAAQAAAASAP3/AAALAAcAAAASAP7/AAALAAgAAAASAP//AAALAAkAAAASAAAAAAAHAAcAAAATAPz/AQAEAAQAAAATAP3/AAAMAAcAAAATAP7/AAAMAAgAAAATAP//AAAMAAkAAAATAAAAAAAHAAcAAAAUAPz/AQAEAAQAAAAUAP3/AAANAAcAAAAUAP7/AAANAAgAAAAUAP//AAANAAkAAAAUAAAAAAAHAAcAAAAVAPz/AQAEAAQAAAAVAP3/AAAHAAcAAAAVAP7/AAAHAAcAAAAWAPz/AQAEAAQAAAAWAP3/AAAHAAcAAAAWAP7/AAAHAAcAAAAXAPz/AQAEAAQAAAAXAP3/AAAHAAcAAAAXAP7/AAAHAAcAAAAYAPz/AAAHAAcAAAAYAP3/AAAHAAcAAAAYAP7/AAAHAAcAAAAZAPz/AAAHAAcAAAAZAP3/AAAHAAcAAAAZAP7/AAAHAAcAAAAaAPz/AAAHAAcAAAAaAP3/AAAHAAcAAAAaAP7/AAAHAAcAAAAbAPz/AQAEAAQAAAAbAP3/AAAHAAcAAAAbAP7/AAAHAAcAAAAVAAYAAAAHAAcAAAAVAAcAAAAHAAcAAAAVAAgAAAAHAAcAAAAWAAYAAAAHAAcAAAAWAAcAAAAHAAcAAAAWAAgAAAAHAAcAAAAXAAYAAAAHAAcAAAAXAAcAAAAHAAcAAAAXAAgAAAAHAAcAAAAYAAYAAAAHAAcAAAAYAAcAAAAHAAcAAAAYAAgAAAAHAAcAAAAZAAYAAAAHAAcAAAAZAAcAAAAHAAcAAAAZAAgAAAAHAAcAAAAaAAYAAAAHAAcAAAAaAAcAAAAHAAcAAAAaAAgAAAAHAAcAAAAbAAYAAAAHAAcAAAAbAAcAAAAHAAcAAAAbAAgAAAAHAAcAAAAcAAYAAAAHAAcAAAAcAAcAAAAHAAcAAAAcAAgAAAAHAAcAAAD///7/AAAHAAcAAAD/////AAAHAAcAAAD//wAAAAAHAAcAAAAAAP7/AAAHAAcAAAAAAP//AAAHAAcAAAAAAAAAAAAHAAcAAAABAP7/AAAHAAcAAAABAP//AAAHAAcAAAABAAAAAAAHAAcAAAAVAP//AAAHAAcAAAAVAAAAAAAHAAcAAAAVAAEAAAAHAAcAAAAVAAIAAAAHAAcAAAAVAAMAAAAHAAcAAAAVAAQAAAAHAAcAAAAVAAUAAAAHAAcAAAAWAP//AAAHAAcAAAAWAAAAAAAHAAcAAAAWAAEAAAAHAAcAAAAWAAIAAAAHAAcAAAAWAAMAAAAHAAcAAAAWAAQAAAAHAAcAAAAWAAUAAAAHAAcAAAAXAP//AAAHAAcAAAAXAAAAAAAHAAcAAAAXAAEAAAAHAAcAAAAXAAIAAAAHAAcAAAAXAAMAAAAHAAcAAAAXAAQAAAAHAAcAAAAXAAUAAAAHAAcAAAAYAP//AAAHAAcAAAAYAAAAAAAHAAcAAAAYAAEAAAAHAAcAAAAYAAIAAAAHAAcAAAAYAAMAAAAHAAcAAAAYAAQAAAAHAAcAAAAYAAUAAAAHAAcAAAAZAP//AAAHAAcAAAAZAAAAAAAHAAcAAAAZAAEAAAAHAAcAAAAZAAIAAAAHAAcAAAAZAAMAAAAHAAcAAAAZAAQAAAAHAAcAAAAZAAUAAAAHAAcAAAAaAP//AAAHAAcAAAAaAAAAAAAHAAcAAAAaAAEAAAAHAAcAAAAaAAIAAAAHAAcAAAAaAAMAAAAHAAcAAAAaAAQAAAAHAAcAAAAaAAUAAAAHAAcAAAAbAP//AAAHAAcAAAAbAAAAAAAHAAcAAAAbAAEAAAAHAAcAAAAbAAIAAAAHAAcAAAAbAAMAAAAHAAcAAAAbAAQAAAAHAAcAAAAbAAUAAAAHAAcAAAAcAP//AAAHAAcAAAAcAAAAAAAHAAcAAAAcAAEAAAAHAAcAAAAcAAIAAAAHAAcAAAAcAAMAAAAHAAcAAAAcAAQAAAAHAAcAAAAcAAUAAAAHAAcAAAAcAPz/AQAEAAQAAAAcAP3/AAAHAAcAAAAcAP7/AAAHAAcAAAAdAPz/AQAEAAQAAAAdAP3/AAAHAAcAAAAdAP7/AAAHAAcAAAAdAP//AAAHAAcAAAAdAAAAAAAHAAcAAAAdAAEAAAAHAAcAAAAdAAIAAAAHAAcAAAAdAAMAAAAHAAcAAAAdAAQAAAAHAAcAAAAdAAUAAAAHAAcAAAAdAAYAAAAHAAcAAAAdAAcAAAAHAAcAAAAdAAgAAAAHAAcAAAAeAPz/AQAEAAQAAAAeAP3/AAAHAAcAAAAeAP7/AAAHAAcAAAAeAP//AAAHAAcAAAAeAAAAAAAHAAcAAAAeAAEAAAAHAAcAAAAeAAIAAAAHAAcAAAAeAAMAAAAHAAcAAAAeAAQAAAAHAAcAAAAeAAUAAAAHAAcAAAAeAAYAAAAHAAcAAAAeAAcAAAAHAAcAAAAeAAgAAAAHAAcAAAAfAPz/AQAEAAQAAAAfAP3/AAAHAAcAAAAfAP7/AAAHAAcAAAAfAP//AAAHAAcAAAAfAAAAAAAHAAcAAAAfAAEAAAAHAAcAAAAfAAIAAAAHAAcAAAAfAAMAAAAHAAcAAAAfAAQAAAAHAAcAAAAfAAUAAAAHAAcAAAAfAAYAAAAHAAcAAAAfAAcAAAAHAAcAAAAfAAgAAAAHAAcAAAD7//z/AAAAAAAAAAD7//3/AAAAAAAAAAD7//7/AAAAAAAAAAD7////AAAAAAAAAAD7/wAAAAAAAAAAAAD7/wEAAAAAAAAAAAD7/wIAAAAAAAAAAAD7/wMAAAAAAAAAAAD7/wQAAAAAAAAAAAD7/wUAAAAAAAAAAAD7/wYAAAAAAAAAAAD7/wcAAAAAAAAAAAD7/wgAAAAAAAAAAAD8//z/AAAHAAcAAAD8//3/AAAHAAcAAAD8//7/AAAHAAcAAAD8////AAAHAAcAAAD8/wAAAAAHAAcAAAD8/wEAAAAHAAcAAAD8/wIAAAAHAAcAAAD8/wMAAAAHAAcAAAD8/wQAAAAHAAcAAAD8/wUAAAAHAAcAAAD8/wYAAAAHAAcAAAD8/wcAAAAHAAcAAAD8/wgAAAAAAAAAAAD9//z/AAAHAAcAAAD9//3/AAAHAAcAAAD9//7/AAAHAAcAAAD9////AAAHAAcAAAD9/wAAAAAHAAcAAAD9/wEAAAAHAAcAAAD9/wIAAAAHAAcAAAD9/wMAAAAHAAcAAAD9/wQAAAAHAAcAAAD9/wUAAAAHAAcAAAD9/wYAAAAHAAcAAAD9/wcAAAAHAAcAAAD9/wgAAAAAAAAAAAD+//z/AAAHAAcAAAD+//3/AAAHAAcAAAD+//7/AAAHAAcAAAD+////AAAHAAcAAAD+/wAAAAAHAAcAAAD+/wEAAAAHAAcAAAD+/wIAAAAHAAcAAAD+/wMAAAAHAAcAAAD+/wQAAAAHAAcAAAD+/wUAAAAHAAcAAAD+/wYAAAAHAAcAAAD+/wcAAAAHAAcAAAD+/wgAAAAAAAAAAAD///z/AAAHAAcAAAD///3/AAAHAAcAAAD//wQAAAAHAAcAAAD//wUAAAAHAAcAAAD//wYAAAAHAAcAAAD//wcAAAAHAAcAAAD//wgAAAAAAAAAAAAAAPz/AAAHAAcAAAAAAP3/AAAHAAcAAAAAAAQAAAAHAAcAAAAAAAUAAAAHAAcAAAAAAAYAAAAHAAcAAAAAAAcAAAAHAAcAAAAAAAgAAAAAAAAAAAABAPz/AAAHAAcAAAABAP3/AAAHAAcAAAABAAQAAAAHAAcAAAABAAUAAAAHAAcAAAABAAYAAAAHAAcAAAABAAcAAAAHAAcAAAABAAgAAAAAAAAAAAACAPz/AAAHAAcAAAACAP3/AAAHAAcAAAACAP7/AAAHAAcAAAACAP//AAAHAAcAAAACAAAAAAAHAAcAAAACAAQAAAAHAAcAAAACAAUAAAAHAAcAAAACAAYAAAAHAAcAAAACAAcAAAAHAAcAAAACAAgAAAAAAAAAAAADAPz/AAAHAAcAAAADAP3/AAAHAAcAAAADAP7/AAAHAAcAAAADAP//AAAHAAcAAAADAAAAAAAHAAcAAAADAAQAAAAHAAcAAAADAAUAAAAHAAcAAAADAAYAAAAHAAcAAAADAAcAAAAHAAcAAAADAAgAAAAAAAAAAAAEAPz/AAAAAAAAAAAEAP3/AAAAAAAAAAAEAP7/AAAAAAAAAAAEAP//AAAAAAAAAAAEAAAAAAAAAAAAAAAEAAQAAAAAAAAAAAAEAAUAAAAAAAAAAAAEAAYAAAAAAAAAAAAEAAcAAAAAAAAAAAAEAAgAAAAAAAAAAAD7//j/AQAEAAQAAAD7//n/AAAAAAAAAAD7//r/AAAAAAAAAAD7//v/AAAAAAAAAAD8//j/AQAEAAQAAAD8//n/AAAAAAAAAAD8//r/AAAHAAcAAAD8//v/AAAHAAcAAAD9//j/AQAEAAQAAAD9//n/AAAAAAAAAAD9//r/AAAHAAcAAAD9//v/AAAHAAcAAAD+//j/AAAHAAcAAAD+//n/AAAAAAAAAAD+//r/AAAHAAcAAAD+//v/AAAHAAcAAAD///j/AAAHAAcAAAD///n/AAAAAAAAAAD///r/AAAHAAcAAAD///v/AAAHAAcAAAAAAPj/AAAHAAcAAAAAAPn/AAAAAAAAAAAAAPr/AAAHAAcAAAAAAPv/AAAHAAcA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AAAeAAkAAQAEAAQAAAAfAAkAAQAEAAQAAAAgAAkAAQAEAAQAAAAgAPv/AQAEAAQAAAAgAPz/AQAEAAQAAAAgAP3/AQAEAAQAAAAgAP7/AQAEAAQAAAAgAP//AQAEAAQAAAAgAAAAAQAEAAQAAAAgAAEAAQAEAAQAAAAgAAIAAQAEAAQAAAAgAAMAAQAEAAQAAAAgAAQAAQAEAAQAAAAgAAUAAQAEAAQAAAAgAAYAAQAEAAQAAAAgAAcAAQAEAAQAAAAgAAgAAQAEAAQAAAARAPn/AQAEAAQAAAARAPr/AQAEAAQAAAASAPn/AQAEAAQAAAASAPr/AQAEAAQAAAATAPn/AQAEAAQAAAATAPr/AQAEAAQAAAAUAPn/AQAEAAQAAAAUAPr/AQAEAAQAAAAVAPn/AQAEAAQAAAAVAPr/AQAEAAQAAAAWAPn/AQAEAAQAAAAWAPr/AQAEAAQAAAAXAPn/AQAEAAQAAAAXAPr/AQAEAAQAAAAYAPn/AAAHAAcAAAAYAPr/AAAHAAcAAAAZAPn/AAAHAAcAAAAZAPr/AAAHAAcAAAAaAPn/AAAHAAcAAAAaAPr/AAAHAAcAAAAbAPn/AQAEAAQAAAAbAPr/AQAEAAQAAAAbAPv/AQAEAAQAAAAcAPn/AQAEAAQAAAAcAPr/AQAEAAQAAAAcAPv/AQAEAAQAAAAdAPn/AQAEAAQAAAAdAPr/AQAEAAQAAAAdAPv/AQAEAAQAAAAeAPn/AQAEAAQAAAAeAPr/AQAEAAQAAAAeAPv/AQAEAAQAAAAfAPn/AQAEAAQAAAAfAPr/AQAEAAQAAAAfAPv/AQAEAAQAAAAgAPn/AQAEAAQAAAAgAPr/AQAEAAQAAAAYAPb/AAAHAAcAAAAYAPf/AAAHAAcAAAAYAPj/AAAHAAcAAAAZAPb/AAAHAAcAAAAZAPf/AAAHAAcAAAAZAPj/AAAHAAcAAAAaAPb/AAAHAAcAAAAaAPf/AAAHAAcAAAAaAPj/AAAHAAcAAAAZAPX/AAAHAAcAAAAaAPX/AAAHAAcAAAAYAPX/AAAHAAcAAAAXAPX/AQAEAAQAAAAXAPb/AQAEAAQAAAAXAPf/AQAEAAQAAAAXAPj/AQAEAAQAAAAbAPX/AQAEAAQAAAAbAPb/AQAEAAQAAAAbAPf/AQAEAAQAAAAbAPj/AQAEAAQAAAAGAP7/AQAEAAQAAAAGAP//AQAEAAQAAAAHAP7/AQAEAAQAAAAHAP//AQAEAAQAAAAIAP7/AQAEAAQAAAAIAP//AQAEAAQAAAAJAP7/AQAEAAQAAAAJAP//AQAEAAQAAAAKAP7/AQAEAAQAAAAKAP//AQAEAAQAAAALAP7/AQAEAAQAAAALAP//AQAEAAQAAAAMAP7/AQAEAAQAAAAMAP//AQAEAAQAAAANAP7/AQAEAAQAAAANAP//AQAEAAQAAAAOAP7/AQAEAAQAAAAOAP//AQAEAAQAAAAPAP7/AQAEAAQAAAAPAP//AQAEAAQAAAAQAP7/AQAEAAQAAAAQAP//AQAEAAQAAAAGAP3/AQAEAAQAAAAHAP3/AQAEAAQAAAAIAP3/AQAEAAQAAAAJAP3/AQAEAAQAAAAKAP3/AQAEAAQAAAALAP3/AQAEAAQAAAAMAP3/AQAEAAQAAAANAP3/AQAEAAQAAAAOAP3/AQAEAAQAAAAPAP3/AQAEAAQAAAAQAP3/AQAEAAQAAAA=")
tile_set = ExtResource("2_0ji40")

[node name="Warp_Up" parent="." unique_id=1860058009 instance=ExtResource("3_52n5y")]
position = Vector2(408, -120)

[node name="Warp_Up2" parent="." unique_id=2071780214 instance=ExtResource("3_52n5y")]
position = Vector2(-8, -120)
room_name = &"room_test_03"

[node name="props_prefab" parent="." unique_id=1854762651 instance=ExtResource("5_8dt50")]
position = Vector2(-64, -16)
autoplay = "banner-big"

[node name="props_prefab2" parent="." unique_id=1459694334 instance=ExtResource("5_8dt50")]
position = Vector2(64, -8)
animation = &"banner-coke"
autoplay = "banner-coke"

[node name="props_prefab3" parent="." unique_id=1047967720 instance=ExtResource("5_8dt50")]
position = Vector2(-64, 72)
animation = &"banner-neon"
autoplay = "banner-neon"

[node name="props_prefab4" parent="." unique_id=1966171419 instance=ExtResource("5_8dt50")]
position = Vector2(72, 128)
animation = &"banner-scroll"
autoplay = "banner-scroll"

[node name="props_prefab5" parent="." unique_id=892448257 instance=ExtResource("5_8dt50")]
position = Vector2(368, -48)
animation = &"banner-side"
autoplay = "banner-side"

[node name="props_prefab6" parent="." unique_id=1844422165 instance=ExtResource("5_8dt50")]
position = Vector2(464, -48)
animation = &"banner-sushi"
autoplay = "banner-sushi"

[node name="props_prefab7" parent="." unique_id=288232011 instance=ExtResource("5_8dt50")]
position = Vector2(328, -40)
animation = &"monitorface"

[node name="props_prefab8" parent="." unique_id=563782957 instance=ExtResource("5_8dt50")]
position = Vector2(296, 144)
animation = &"banner-neon"
autoplay = "banner-neon"

[node name="Item" parent="." unique_id=926208097 instance=ExtResource("6_7i8dt")]
position = Vector2(-48, 112)
collision_layer = 4
pickable_consumableitem = Array[ExtResource("13_mxnnk")]([SubResource("Resource_4u8d0"), SubResource("Resource_w87vk")])
pickable_equipitem = Array[ExtResource("8_ygji3")]([SubResource("Resource_8ss50")])
pickable_keyitem = Array[ExtResource("10_xdoc7")]([SubResource("Resource_srwso"), SubResource("Resource_xdoc7")])

[node name="Enemy1" type="CharacterBody2D" parent="." unique_id=825266602 node_paths=PackedStringArray("enemy_collider", "area2d_Interactable", "area2d_collider", "enemy", "label")]
y_sort_enabled = true
position = Vector2(400, 48)
collision_layer = 4
script = SubResource("GDScript_xdoc7")
enemy_collider = NodePath("CollisionShape2D")
area2d_Interactable = NodePath("Area2D_Interactable")
area2d_collider = NodePath("Area2D_Interactable/CollisionShape2D")
enemy = [NodePath("Foe_01"), NodePath("Foe_03"), NodePath("Foe_02")]
label = NodePath("Marker2D/Label")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemy1" unique_id=1172717570]
shape = SubResource("RectangleShape2D_wkx03")

[node name="Area2D_Interactable" type="Area2D" parent="Enemy1" unique_id=733253951 node_paths=PackedStringArray("_enemy_root")]
collision_layer = 16
collision_mask = 0
script = SubResource("GDScript_ygji3")
_enemy_root = NodePath("..")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemy1/Area2D_Interactable" unique_id=693989030]
shape = SubResource("RectangleShape2D_xdoc7")

[node name="Foe_01" parent="Enemy1" unique_id=463040546 instance=ExtResource("6_jyvag")]

[node name="Foe_03" parent="Enemy1" unique_id=102607479 instance=ExtResource("6_jyvag")]
visible = false
position = Vector2(32, 16)

[node name="Foe_02" parent="Enemy1" unique_id=1810101425 instance=ExtResource("6_jyvag")]
visible = false
position = Vector2(32, -16)

[node name="Marker2D" type="Marker2D" parent="Enemy1" unique_id=922697963]
position = Vector2(0, -48)
scale = Vector2(0.5, 0.5)

[node name="Label" type="Label" parent="Enemy1/Marker2D" unique_id=1414197413]
z_index = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -20.0
offset_top = -42.0
offset_right = 20.0
grow_horizontal = 2
grow_vertical = 0
theme_override_constants/outline_size = 4
theme_override_font_sizes/font_size = 30
text = "!"
horizontal_alignment = 1
vertical_alignment = 2

[node name="Savespot" parent="." unique_id=555243044 instance=ExtResource("9_4u8d0")]
position = Vector2(168, 48)
collision_layer = 4
dialogue = "* Creating a ripoff Deltarune videogame fills you with determination."

[node name="Merchant_01" type="Area2D" parent="." unique_id=116747151 node_paths=PackedStringArray("user")]
position = Vector2(40, -96)
collision_layer = 4
collision_mask = 0
script = SubResource("GDScript_rqg47")
user = NodePath("Foe_01")
_consumableitem_array = Array[ExtResource("13_mxnnk")]([SubResource("Resource_kcmek"), SubResource("Resource_ptuk6")])
_equipitem_array = Array[ExtResource("8_ygji3")]([SubResource("Resource_8opot")])
_keyitem_array = Array[ExtResource("10_xdoc7")]([SubResource("Resource_wrvon")])

[node name="CollisionShape2D" type="CollisionShape2D" parent="Merchant_01" unique_id=18736405]
shape = SubResource("CircleShape2D_rqg47")

[node name="Foe_01" parent="Merchant_01" unique_id=2119111307 instance=ExtResource("6_jyvag")]
